<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="default"/>
<meta name="apple-mobile-web-app-title" content="USA 2025"/>
<title>USA 2025 Adventure</title>
<style>
:root{
  --primary: #FF385C; --primary-light: #FFE8ED; --secondary: #00A699; --success: #34C759;
  --text-primary: #1D1D1F; --text-secondary: #6E6E73; --text-tertiary: #8E8E93;
  --bg-primary: #FFFFFF; --bg-secondary: #F2F2F7; --surface: #FFFFFF;
  --separator: rgba(60,60,67,0.12); --link: #007AFF;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.04); --shadow-md: 0 4px 12px rgba(0,0,0,0.08); --shadow-lg: 0 8px 32px rgba(0,0,0,0.12); --shadow-xl: 0 16px 64px rgba(0,0,0,0.16);
  --radius-lg: 16px; --radius-xl: 20px; --radius-2xl: 24px;
  --spring: cubic-bezier(0.175, 0.885, 0.32, 1.275); --ease-ios: cubic-bezier(0.25, 0.1, 0.25, 1);
  --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Helvetica Neue",Arial,sans-serif;
  background:var(--bg-secondary); color:var(--text-primary);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden; padding-top:var(--safe-top);
}

/* ========== Header & Hero ========== */
.status-aware-header{position:sticky; top:0; z-index:100; background:rgba(255,255,255,0.8); backdrop-filter:saturate(180%) blur(20px); -webkit-backdrop-filter:saturate(180%) blur(20px); border-bottom:0.5px solid var(--separator); padding:8px 20px;}
.nav-container{max-width:1200px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; height:48px;}
.logo{font-size:20px; font-weight:700; color:var(--primary); display:flex; align-items:center; gap:6px;}
.hero{background:var(--bg-primary); padding:32px 20px 40px; text-align:center;}
.hero-title{font-size:clamp(32px, 8vw, 48px); font-weight:800; letter-spacing:-0.02em; line-height:1.1; margin-bottom:8px;}
.hero-subtitle{font-size:18px; font-weight:500; color:var(--text-secondary); margin-bottom:24px;}
.countdown-container{display:flex; justify-content:center; gap:12px; margin-top:24px; flex-wrap:wrap;}
.countdown-card{background:var(--surface); border:1px solid var(--separator); border-radius:var(--radius-lg); padding:16px 12px; min-width:72px; box-shadow:var(--shadow-sm);}
.countdown-value{font-size:28px; font-weight:800; color:var(--primary); line-height:1; display:block; font-variant-numeric:tabular-nums;}
.countdown-label{font-size:12px; font-weight:600; color:var(--text-tertiary); text-transform:uppercase; letter-spacing:0.5px; margin-top:4px;}

/* ========== Content Sections ========== */
.content-section{background:var(--bg-primary); margin:8px; border-radius:var(--radius-xl); overflow:hidden; box-shadow:var(--shadow-md);}
.section-header{padding:24px 20px 16px; border-bottom:1px solid var(--separator);}
.section-title{font-size:24px; font-weight:700; color:var(--text-primary); margin-bottom:4px;}
.section-subtitle{font-size:16px; color:var(--text-secondary);}
.section-content{padding:20px;}
.content-grid{display:grid; grid-template-columns: 1fr; gap: 24px; max-width: 1200px; margin: 0 auto; padding: 8px;}
@media (min-width: 1024px) {
  .content-grid { grid-template-columns: 2fr 1fr; }
  .grid-span-2 { grid-column: span 2; }
}


/* ========== Road Trip Map ========== */
.road-trip-map { padding: 24px; background: var(--surface); border-radius: var(--radius-xl); margin:8px; box-shadow:var(--shadow-md); }
.road-trip-map h2 { font-size: 22px; font-weight: 700; margin-bottom: 24px; }
.timeline { display: grid; grid-template-columns: repeat(4, 1fr); align-items: center; position: relative; gap: 10px; }
.timeline-item { text-align: center; }
.timeline-date { font-size: 12px; font-weight: 500; color: var(--text-tertiary); margin-bottom: 8px; }
.timeline-icon { font-size: 36px; line-height: 1; }
.timeline-city { font-size: 14px; font-weight: 600; color: var(--link); margin-top: 8px; }
.timeline-progress { position: absolute; width: 100%; height: 4px; background: var(--separator); top: calc(50% - 2px); z-index: -1; }
.timeline-progress-bar { height: 100%; width: 0; background: var(--link); border-radius: 2px; }
.timeline-point { position: absolute; top: 50%; left: 0; transform: translate(-50%, -50%); width: 12px; height: 12px; background: var(--surface); border: 3px solid var(--link); border-radius: 50%; }
.map-footer { margin-top: 24px; font-size: 14px; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; }


/* ========== Trip Planner (Carousel) ========== */
.trip-planner { padding: 24px; background: var(--surface); border-radius: var(--radius-xl); margin:8px; box-shadow:var(--shadow-md);}
.planner-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.planner-header h2 { font-size: 22px; font-weight: 700; margin-bottom: 0; }
.planner-dots { display: flex; gap: 6px; }
.dot { width: 8px; height: 8px; border-radius: 50%; background: var(--separator); transition: all 0.3s ease; cursor: pointer; }
.dot.active { background: var(--link); transform: scale(1.2); }
.tip-carousel { overflow: hidden; }
.tip-track { display: flex; transition: transform 0.5s var(--ease-ios); }
.tip-slide { flex-shrink: 0; width: 100%; display: flex; align-items: center; gap: 16px; padding-bottom: 4px; }
.tip-icon { font-size: 32px; background: var(--primary-light); color: var(--primary); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.tip-text h4 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
.tip-text p { font-size: 14px; color: var(--text-secondary); line-height: 1.4; }


/* ========== Currency Converter ========== */
.currency-converter { padding: 24px; background: var(--surface); border-radius: var(--radius-xl); margin:8px; box-shadow:var(--shadow-md);}
.currency-converter h2 { font-size: 22px; font-weight: 700; margin-bottom: 4px; display:flex; align-items:center; gap: 8px;}
.currency-rate { font-size: 28px; font-weight: 800; color: var(--text-primary); margin-bottom: 8px; }
.currency-rate-sub { font-size: 14px; color: var(--text-tertiary); margin-bottom: 24px; }
.currency-inputs { display: grid; grid-template-columns: 1fr auto; gap: 12px; margin-bottom: 20px; }
.currency-inputs input, .currency-inputs select { width: 100%; padding: 12px; font-size: 16px; border-radius: 12px; border: 1px solid var(--separator); background: var(--bg-secondary); }
.currency-chart { height: 80px; margin-bottom: 24px; }
.currency-chart svg { width: 100%; height: 100%; }
.action-btn { width: 100%; padding: 16px; font-size: 16px; font-weight: 600; color: #fff; background: var(--link); border: none; border-radius: 12px; cursor: pointer; transition: background 0.2s ease; }
.action-btn:hover { background: #0056b3; }


/* ========== Destinations Hub (Main Component) ========== */
.tabs{display:flex;gap:12px;margin-bottom:24px;overflow-x:auto;flex-wrap:nowrap;padding:4px 20px;margin-left:-20px;margin-right:-20px; scrollbar-width:none;}
.tabs::-webkit-scrollbar{display:none;}
.tab{padding:8px 18px;background:var(--surface);border:1px solid var(--separator);border-radius:30px;font-weight:600;cursor:pointer;transition:all .3s var(--ease-ios); white-space:nowrap; flex-shrink:0; font-size: 15px;}
.tab.active{background:var(--primary);color:#fff;border-color:var(--primary);transform:translateY(-2px);box-shadow:0 8px 16px rgba(255,56,92,.25)}
.tab:hover:not(.active){transform:translateY(-1px);box-shadow:var(--shadow-md)}
.main-card{background:var(--surface);border-radius:var(--radius-xl);overflow:hidden;box-shadow:var(--shadow-lg);display:flex;transition:opacity .4s var(--ease-ios), transform .4s var(--ease-ios);opacity:0;transform:translateY(20px)}
.main-card.visible{opacity:1;transform:translateY(0)}
.hero-image{flex:1;min-height:500px;background-size:cover;background-position:center;position:relative;display:flex;flex-direction:column;justify-content:flex-end;padding:32px;color:#fff}
.hero-image::after{content:"";position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.7) 0%,rgba(0,0,0,0) 55%)}
.hero-image-title{position:relative;z-index:1;font-size:36px;font-weight:800;line-height:1.2}
.hero-area{position:relative;z-index:1;font-size:18px;font-weight:500;opacity:.95;margin-top:4px}
.content-column{flex:0 0 350px;padding:24px;display:flex;flex-direction:column;gap:24px;max-height:500px;overflow-y:auto; background:var(--bg-secondary);}
.info-item{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid var(--separator);font-size:16px}
.info-item:last-child{border-bottom:none}
.info-item span:first-child{color:var(--text-secondary)}
.info-item span:last-child{font-weight:600}
.weather-main{display:flex;align-items:center;gap:16px;margin-bottom:12px}
.weather-icon{font-size:46px;animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.weather-temp{font-size:40px;font-weight:800}
.weather-desc{font-size:15px;color:var(--text-secondary)}
.widget{background:var(--surface);border:1px solid var(--separator);box-shadow:var(--shadow-sm);border-radius:var(--radius-lg);padding:20px}
.widget h3{font-size:18px;font-weight:700;margin-bottom:12px;color:var(--text-primary)}
.widget-list{display:grid;gap:12px}
.widget-item{display:flex;gap:14px;padding:12px;border:1px solid var(--separator);border-radius:var(--radius-lg);align-items:center;transition:transform .15s var(--ease-ios),background .15s var(--ease-ios)}
.widget-item:hover{transform:translateY(-2px);background:var(--primary-light)}
.widget-icon{font-size:24px;width:30px;text-align:center}
.widget-text h4{font-size:16px;font-weight:600}
.widget-text p{font-size:14px;color:var(--text-secondary)}
.widget-item.a{cursor:pointer;text-decoration:none;color:inherit}

/* ========== Moments & Flights Section ========== */
.moments-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:16px;}
.moment-card{background:var(--surface);border:1px solid var(--separator);border-radius:var(--radius-lg);padding:20px;transition:all 0.2s var(--ease-ios);cursor:pointer;}
.moment-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg);border-color:var(--primary);}
.moment-header{display:flex;align-items:center;gap:12px;margin-bottom:12px;}
.moment-icon{font-size:32px;}
.moment-title{font-size:18px;font-weight:600;}
.moment-description{font-size:14px;color:var(--text-secondary);line-height:1.5;}
.flights-list{display:grid;gap:16px;}
.flight-card{background:var(--surface);border:1px solid var(--separator);border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-sm);}
.flight-header{padding:16px 20px;border-bottom:1px solid var(--separator);}
.flight-route{font-size:20px;font-weight:700;}
.flight-date{font-size:14px;color:var(--text-secondary);}
.flight-details{padding:20px;display:grid;grid-template-columns:repeat(auto-fit, minmax(100px, 1fr));gap:16px;}
.detail-label{font-size:12px;color:var(--text-tertiary);text-transform:uppercase;margin-bottom:4px;}
.detail-value{font-size:16px;font-weight:600;}
.flight-status{background:rgba(52,199,89,0.15);color:#34C759;font-size:12px;font-weight:600;padding:6px 12px;border-radius:var(--radius-lg);display:inline-block;}

/* ========== MOBILE & RESPONSIVE STYLES ========== */
@media (max-width: 800px){
  .main-card{flex-direction:column}
  .content-column{max-height:none}
  .hero-image{min-height:420px}
}

@media (max-width: 768px) {
    .moments-grid {
        display: flex;
        overflow-x: auto;
        flex-wrap: nowrap;
        gap: 16px;
        margin: 0 -20px;
        padding: 4px 20px;
        scrollbar-width: none;
        scroll-snap-type: x mandatory;
    }
    .moments-grid::-webkit-scrollbar { display: none; }
    .moments-grid .moment-card {
        flex-shrink: 0;
        width: 80vw;
        max-width: 320px;
        scroll-snap-align: start;
    }
    .timeline { grid-template-columns: repeat(2, 1fr); row-gap: 30px; } /* Adjust map for mobile */
    .timeline-progress { display: none; } /* Hide line on mobile */
    .timeline-point { display: none; }
}

.animate-on-scroll{opacity:0;transform:translateY(20px);transition:all 0.6s var(--ease-ios);}
.animate-on-scroll.visible{opacity:1;transform:translateY(0);}

</style>
</head>
<body>
  <header class="status-aware-header">
    <div class="nav-container">
      <div class="logo">USA 2025 ✈️</div>
    </div>
  </header>

  <section class="hero">
    <h1 class="hero-title">Your American Adventure</h1>
    <p class="hero-subtitle">September 19 – October 3, 2025 • 15 Days</p>
    <div class="countdown-container">
      <div class="countdown-card"><span class="countdown-value" id="days">--</span><div class="countdown-label">Days</div></div>
      <div class="countdown-card"><span class="countdown-value" id="hours">--</span><div class="countdown-label">Hours</div></div>
      <div class="countdown-card"><span class="countdown-value" id="minutes">--</span><div class="countdown-label">Minutes</div></div>
      <div class="countdown-card"><span class="countdown-value" id="seconds">--</span><div class="countdown-label">Seconds</div></div>
    </div>
  </section>

  <main class="content-grid">
    <div class="road-trip-map animate-on-scroll grid-span-2">
        <h2>Road Trip Map</h2>
        <div class="timeline">
            <div class="timeline-progress"><div class="timeline-progress-bar"></div></div>
            <div class="timeline-item">
                <div class="timeline-date">SEP 19–23</div>
                <div class="timeline-icon">🌉</div>
                <div class="timeline-city">San Francisco</div>
                <div class="timeline-point" style="left: 12.5%;"></div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">SEP 23–26</div>
                <div class="timeline-icon">🌲</div>
                <div class="timeline-city">Yosemite</div>
                <div class="timeline-point" style="left: 37.5%;"></div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">SEP 26–OCT 1</div>
                <div class="timeline-icon">🎰</div>
                <div class="timeline-city">Las Vegas</div>
                <div class="timeline-point" style="left: 62.5%;"></div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">OCT 1–3</div>
                <div class="timeline-icon">🗽</div>
                <div class="timeline-city">New York City</div>
                <div class="timeline-point" style="left: 87.5%;"></div>
            </div>
        </div>
        <div class="map-footer">
            <span id="countdown-days-footer">~37 days</span> until your journey begins!
        </div>
    </div>

    <div class="trip-planner animate-on-scroll">
        <div class="planner-header">
            <h2>Trip Planner</h2>
            <div class="planner-dots" id="planner-dots"></div>
        </div>
        <div class="tip-carousel">
            <div class="tip-track" id="tip-track">
                <div class="tip-slide">
                    <div class="tip-icon">📦</div>
                    <div class="tip-text">
                        <h4>Smart Packing Tip</h4>
                        <p>Use packing cubes to separate clothes for different climates (e.g., SF vs. Vegas).</p>
                    </div>
                </div>
                <div class="tip-slide">
                    <div class="tip-icon">🔌</div>
                    <div class="tip-text">
                        <h4>Electronics Ready</h4>
                        <p>Bring a portable power bank. Long days of exploring will drain your battery fast!</p>
                    </div>
                </div>
                <div class="tip-slide">
                    <div class="tip-icon">👟</div>
                    <div class="tip-text">
                        <h4>Comfort is Key</h4>
                        <p>Pack your most comfortable walking shoes. You'll be covering a lot of ground!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="currency-converter animate-on-scroll">
        <h2>🦄 GBP to USD Tracker</h2>
        <div class="currency-rate">£1 = $1.349</div>
        <div class="currency-rate-sub">1 GBP = 1.349 USD</div>
        <div class="currency-inputs">
            <input type="number" placeholder="Enter amount">
            <select>
                <option>GBP to USD</option>
            </select>
        </div>
        <div class="currency-chart">
             <svg viewBox="0 0 300 80" preserveAspectRatio="none">
                <path d="M0,40 C30,20 60,50 90,40 C120,30 150,60 180,50 C210,40 240,70 270,60 C285,55 300,50 300,50" stroke="#8E8E93" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </div>
        <button class="action-btn">Set Rate Alert</button>
    </div>

    <section id="destinations-hub" class="content-section animate-on-scroll grid-span-2">
        <div class="section-header">
            <h2 class="section-title">Destinations & Stays</h2>
            <p class="section-subtitle">Your interactive trip itinerary</p>
        </div>
        <div class="section-content">
            <div class="tabs" id="tabs" role="tablist"></div>
            <div class="main-card" id="main-card" aria-live="polite">
              <div class="hero-image" id="hero-image">
                <h2 class="hero-image-title" id="hero-title"></h2>
                <p class="hero-area" id="hero-area"></p>
              </div>
              <aside class="content-column" id="content-column"></aside>
            </div>
        </div>
    </section>
    
    <section id="dynamic-moments-section" class="content-section animate-on-scroll grid-span-2">
      <div class="section-header">
        <h2 class="section-title">Epic Moments</h2>
        <p class="section-subtitle">Unforgettable experiences planned</p>
      </div>
      <div class="section-content">
        <div class="moments-grid" id="dynamic-moments-grid"></div>
      </div>
    </section>
</main>

<script>
/* ========== GLOBAL STATE & DATA ========== */
const cities = {
  sanfran:{
    name:"San Francisco", hero:"https://images.unsplash.com/photo-1506146332389-18140dc7b241?auto=format&fit=crop&w=1400&q=80", dates:"19–23 Sep", area:"Union Square", lat:37.7749, lon:-122.4194,
    food:[
        {icon:"🍞", name:"Boudin Bakery", desc:"Sourdough bowls at the Wharf.", url:"https://www.google.com/maps/search/?api=1&query=Boudin+Bakery+Fisherman%27s+Wharf"},
        {icon:"🥗", name:"Greens Restaurant", desc:"Iconic vegetarian dining with views.", url:"https://www.google.com/maps/search/?api=1&query=Greens+Restaurant+Fort+Mason", veg:true},
        {icon:"🌯", name:"La Taqueria", desc:"Authentic Mission-style burritos.", url:"https://www.google.com/maps/search/?api=1&query=La+Taqueria+San+Francisco"},
        {icon:"🍫", name:"Ghirardelli Square", desc:"World-famous chocolate & sundaes.", url:"https://www.google.com/maps/search/?api=1&query=Ghirardelli+Square"}
    ],
    moments:[
        {id:"ggSunrise", icon:"🌉", title:"Golden Gate Sunrise", description:"First light at Battery Spencer. Have layers ready for the wind."},
        {id:"alcatraz", icon:"⛓️", title:"Alcatraz Island Tour", description:"Explore the infamous prison."},
        {id:"cableCar", icon:"🚃", title:"Ride a Cable Car", description:"Climb the hills of SF."},
        {id:"muirWoods", icon:"🌲", title:"Walk with Giants", description:"Visit the majestic redwood forest at Muir Woods."}
    ],
    flights:[ {route:"LON → SFO", date:"Sep 19", number:"TA 017", status:"Booked"} ],
    concierge:[ {icon:"🗺️", label:"Maps", url:"https://www.google.com/maps/search/?api=1&query=Union+Square+San+Francisco"}, {icon:"☕", label:"Coffee", url:"https://www.google.com/maps/search/?api=1&query=coffee+near+Union+Square+SF"}, {icon:"💊", label:"Pharmacy", url:"https://www.google.com/maps/search/?api=1&query=pharmacy+near+Union+Square+SF"} ]
  },
  yosemite:{
    name:"Yosemite", hero:"https://images.unsplash.com/photo-1519045395453-6d0422c54b42?auto=format&fit=crop&w=1400&q=80", dates:"23–26 Sep", area:"Yosemite Valley", lat:37.7456, lon:-119.5936,
    food:[
        {icon:"🍕", name:"Curry Village Pizza", desc:"Casual outdoor patio pies.", url:"https://www.google.com/maps/search/?api=1&query=Curry+Village+Pizza+Deck"},
        {icon:"🍔", name:"Village Grill Deck", desc:"Classic grill fare with great views. Veggie burgers available.", url:"https://www.google.com/maps/search/?api=1&query=Village+Grill+Yosemite", veg:true},
        {icon:"🏨", name:"The Ahwahnee Dining", desc:"Historic fine dining experience.", url:"https://www.google.com/maps/search/?api=1&query=The+Ahwahnee+Dining+Room"}
    ],
    moments:[
        {id:"stargazing", icon:"🌌", title:"Yosemite Stargazing", description:"Milky Way hunt from Glacier Point or Tunnel View."},
        {id:"mistTrail", icon:"💦", title:"Hike the Mist Trail", description:"Get soaked by Vernal Fall."},
        {id:"sequoias", icon:"🌲", title:"Mariposa Grove", description:"Walk among giant sequoias."},
        {id:"tunnelViewSunset", icon:"🌅", title:"Tunnel View Sunset", description:"Watch the valley light up at golden hour."}
    ],
    concierge:[ {icon:"🏔️", label:"Visitor Center", url:"https://www.google.com/maps/search/?api=1&query=Yosemite+Valley+Visitor+Center"}, {icon:"🥾", label:"Trail Maps", url:"https://www.nps.gov/yose/planyourvisit/maps.htm"}, {icon:"🚌", label:"Shuttle", url:"https://www.nps.gov/yose/planyourvisit/publictransportation.htm"} ]
  },
  vegas:{
    name:"Las Vegas", hero:"https://images.unsplash.com/photo-1580006825960-4a173930b8df?auto=format&fit=crop&w=1400&q=80", dates:"26 Sep–1 Oct", area:"The Strip", lat:36.1699, lon:-115.1398,
    food:[
        {icon:"🍽️", name:"Bacchanal Buffet", desc:"Caesars’ legendary mega buffet.", url:"https://www.google.com/maps/search/?api=1&query=Bacchanal+Buffet"},
        {icon:"🌱", name:"Crossroads Kitchen", desc:"Upscale, popular plant-based dining.", url:"https://www.google.com/maps/search/?api=1&query=Crossroads+Kitchen+Las+Vegas", veg:true},
        {icon:"🌮", name:"Tacos El Gordo", desc:"Famous Tijuana-style tacos.", url:"https://www.google.com/maps/search/?api=1&query=Tacos+El+Gordo+Las+Vegas"},
        {icon:"🥩", name:"Gordon Ramsay Steak", desc:"High-end steakhouse experience.", url:"https://www.google.com/maps/search/?api=1&query=Gordon+Ramsay+Steak+Las+Vegas"}
    ],
    moments:[
        {id:"vegasNight", icon:"🎰", title:"Vegas Boys Night", description:"Neon crawl: Bellagio → Chandelier Bar → Fremont."},
        {id:"sphere", icon:"🌐", title:"MSG Sphere", description:"Arrive early, centre seats for full dome experience."},
        {id:"grandCanyon", icon:"🚁", title:"Grand Canyon Trip", description:"Heli West Rim or road to South Rim."},
        {id:"hooverDam", icon:"🌊", title:"Hoover Dam", description:"Morning tour, Boulder City coffee stop."},
        {id:"rooftopToast", icon:"🥂", title:"Rooftop Toast", description:"Legacy Club • Skyfall • Foundation Room."},
        {id:"neonBoneyard", icon:"💀", title:"Neon Boneyard", description:"Explore the history of Vegas through its signs."}
    ],
    flights:[ {route:"LAS → NYC", date:"Oct 1", number:"DJ 442", status:"Booked"} ],
    concierge:[ {icon:"🎰", label:"Casinos", url:"https://www.google.com/maps/search/?api=1&query=casinos+Las+Vegas+Strip"}, {icon:"🍸", label:"Bars", url:"https://www.google.com/search?q=best+cocktail+bars+las+vegas"}, {icon:"🎭", label:"Shows", url:"https://www.google.com/search?q=las+vegas+shows+tickets"} ]
  },
  nyc:{
    name:"New York City", hero:"https://images.unsplash.com/photo-1546436836-07a91091f160?auto=format&fit=crop&w=1400&q=80", dates:"1–3 Oct", area:"Midtown", lat:40.7128, lon:-74.0060,
    food:[
        {icon:"🍕", name:"Joe’s Pizza", desc:"The quintessential NY slice.", url:"https://www.google.com/maps/search/?api=1&query=Joe%27s+Pizza+NYC"},
        {icon:"🥙", name:"The Halal Guys", desc:"Famous street cart (falafel avail.)", url:"https://www.google.com/maps/search/?api=1&query=The+Halal+Guys", veg: true},
        {icon:"🥯", name:"Russ & Daughters", desc:"Iconic bagels and lox.", url:"https://www.google.com/maps/search/?api=1&query=Russ+%26+Daughters"},
        {icon:"🍜", name:"Ippudo", desc:"World-class ramen bowls.", url:"https://www.google.com/maps/search/?api=1&query=Ippudo+NYC"}
    ],
    moments:[
        {id:"broadway", icon:"🎭", title:"Broadway Night", description:"Matinee + dinner or late show + stroll."},
        {id:"topOfRock", icon:"🏙️", title:"Top of the Rock", description:"Unbeatable skyline views."},
        {id:"streetFood", icon:"🥡", title:"NYC Street Food", description:"Slices, bagels, halal — easy walking loop."},
        {id:"brooklynBridge", icon:"🌉", title:"Brooklyn Bridge Walk", description:"Iconic walk for incredible skyline views."},
        {id:"heliTour", icon:"🚁", title:"Manhattan Heli Tour", description:"See the Big Apple from the sky."}
    ],
    flights:[ {route:"NYC → LON", date:"Oct 3", number:"AH 021", status:"Booked"} ],
    concierge:[ {icon:"🗺️", label:"Subway", url:"https://new.mta.info/map/5256"}, {icon:"🍕", label:"Pizza", url:"https://www.google.com/search?q=best+pizza+slice+nyc"}, {icon:"🎭", label:"Broadway", url:"https://www.broadway.com/"} ]
  }
};
let currentCityId = 'sanfran';

/* ========== INITIALIZATION ========== */
document.addEventListener('DOMContentLoaded', () => {
    setupCountdown();
    observeScrollAnimations();
    setupTripPlanner();
    buildTabs();
    switchCity(currentCityId, true);
});

/* ========== CORE UI FUNCTIONS ========== */
function setupCountdown() {
  const tripDate = new Date('2025-09-19T09:00:00-07:00');
  const update = () => {
    const diff = tripDate.getTime() - new Date().getTime();
    if (diff <= 0) {
      document.querySelector('.countdown-container').innerHTML = `<div style="font-size:18px;font-weight:600;color:var(--success);">🎉 Adventure Time!</div>`;
      if(document.getElementById('countdown-days-footer')) document.getElementById('countdown-days-footer').textContent = 'Your';
      clearInterval(countdownInterval);
      return;
    }
    const daysLeft = Math.floor(diff / 864e5);
    const set = (id, v) => document.getElementById(id).textContent = String(v).padStart(2,'0');
    set('days', daysLeft);
    set('hours', Math.floor((diff % 864e5) / 36e5));
    set('minutes', Math.floor((diff % 36e5) / 6e4));
    set('seconds', Math.floor((diff % 6e4) / 1e3));
    if(document.getElementById('countdown-days-footer')) {
        document.getElementById('countdown-days-footer').textContent = `~${daysLeft} days`;
    }
  };
  update();
  const countdownInterval = setInterval(update, 1000);
}

function observeScrollAnimations() {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
  }, { threshold: 0.1 });
  document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));
}

function setupTripPlanner() {
    const track = document.getElementById('tip-track');
    const dotsContainer = document.getElementById('planner-dots');
    if (!track || !dotsContainer) return;

    const slides = Array.from(track.children);
    let currentIndex = 0;
    let autoPlayInterval;

    // Create dots
    slides.forEach((_, i) => {
        const dot = document.createElement('button');
        dot.classList.add('dot');
        if (i === 0) dot.classList.add('active');
        dot.addEventListener('click', () => {
            goToSlide(i);
            resetAutoPlay();
        });
        dotsContainer.appendChild(dot);
    });
    const dots = Array.from(dotsContainer.children);

    const goToSlide = (index) => {
        track.style.transform = `translateX(-${index * 100}%)`;
        dots.forEach((d, i) => d.classList.toggle('active', i === index));
        currentIndex = index;
    };

    const nextSlide = () => {
        const nextIndex = (currentIndex + 1) % slides.length;
        goToSlide(nextIndex);
    };
    
    const resetAutoPlay = () => {
        clearInterval(autoPlayInterval);
        autoPlayInterval = setInterval(nextSlide, 5000); // Restart autoplay
    };

    // Start autoplay
    autoPlayInterval = setInterval(nextSlide, 5000);
}


function buildTabs() {
  const container = document.getElementById('tabs');
  container.innerHTML = Object.keys(cities).map((id, i) =>
    `<button class="tab ${i===0?'active':''}" data-city="${id}">${cities[id].name}</button>`
  ).join('');
  container.addEventListener('click', e => { if (e.target.matches('.tab')) switchCity(e.target.dataset.city); });
}

function switchCity(cityId, isInitial = false) {
  currentCityId = cityId;
  const city = cities[cityId];
  const card = document.getElementById('main-card');
  
  const updateContent = () => {
    document.getElementById('hero-image').style.backgroundImage = `url('${city.hero}')`;
    document.getElementById('hero-title').textContent = city.name;
    document.getElementById('hero-area').textContent = city.area;

    const foodHtml = `
      <div class="widget">
        <h3>Good Food Spots</h3>
        <div class="widget-list">
          ${city.food.map(item => `
            <a class="widget-item a" href="${item.url}" target="_blank" rel="noopener">
              <div class="widget-icon">${item.icon}</div>
              <div class="widget-text">
                <h4>${item.name} ${item.veg ? '<span style="color:var(--success);font-size:12px;">🌱</span>' : ''}</h4>
                <p>${item.desc}</p>
              </div>
            </a>
          `).join('')}
        </div>
      </div>`;

    document.getElementById('content-column').innerHTML = `
      <div style="background:var(--surface);padding:16px;border-radius:var(--radius-lg);">
        <div class="info-item"><span>Dates</span><span>${city.dates}</span></div>
        <div class="info-item"><span>Area</span><span>${city.area}</span></div>
      </div>
      <div class="widget" style="cursor:pointer;" id="weather-widget">
        <h3>Live Weather</h3>
        <div class="weather-main"><div class="weather-icon">⏳</div><div><div class="weather-temp">--°C</div><div class="weather-desc">Loading...</div></div></div>
      </div>
      ${foodHtml}
      `;
      
    renderDynamicSections(cityId);
    document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.city === cityId));
    card.classList.add('visible');
  };

  if (isInitial) {
    updateContent();
  } else {
    card.classList.remove('visible');
    setTimeout(updateContent, 300);
  }
}

function renderDynamicSections(cityId) {
    const city = cities[cityId];

    const momentsSection = document.getElementById('dynamic-moments-section');
    const momentsGrid = document.getElementById('dynamic-moments-grid');
    if (city.moments?.length > 0) {
        momentsGrid.innerHTML = city.moments.map(moment => `<article class="moment-card" onclick="openCustomModal('moment', '${moment.id}')"><div class="moment-header"><div class="moment-icon">${moment.icon}</div><h3 class="moment-title">${moment.title}</h3></div><p class="moment-description">${moment.description}</p></article>`).join('');
        momentsSection.style.display = 'block';
    } else {
        momentsSection.style.display = 'none';
    }
}
</script>
</body>
</html>
